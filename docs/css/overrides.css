/* Variables come from docs/css/tokens.css (synced from assets/design/tokens.css) */

.md-typeset code,.md-typeset pre{background:rgba(0,0,0,0.04)}
.md-typeset .admonition{border-radius:8px}
.md-nav__link--active{font-weight:600}

/* Layout framing and depth */
body{color:var(--color-ink)}
.md-header{
  box-shadow: 0 2px 10px rgba(0,0,0,.06);
  border-bottom: 1px solid rgba(0,0,0,0.06);
  backdrop-filter: saturate(140%) blur(6px);
}
.md-main{background: linear-gradient(180deg, #ffffff, #fbfbfb)}
.md-main__inner{background: none}
.md-content{
  position: relative;
}
.md-content__inner{
  background: var(--surface);
  border: 1px solid var(--color-line);
  border-radius: 12px;
  box-shadow:
    0 10px 30px rgba(0,0,0,0.04),
    0 1px 0 rgba(255,255,255,0.7) inset;
  padding: 0.2px; /* create a new stacking context for overlay */
}
.md-content__inner::before{
  content: "";
  position: absolute; inset: 0; pointer-events: none;
  background-image: var(--noise);
  opacity: .6; mix-blend-mode: soft-light;
  border-radius: 12px;
}
.md-sidebar--primary,.md-sidebar--secondary{
  background: var(--surface-muted);
  border-right: 1px solid var(--color-line);
}
.md-footer{
  border-top: 1px solid var(--color-line);
  background: linear-gradient(180deg, #fafafa, #f1f5f9);
}

/* Dark mode tuning */
@media (prefers-color-scheme: dark){
  .md-header{ box-shadow: 0 2px 10px rgba(0,0,0,.35); border-bottom-color: rgba(255,255,255,0.06) }
  .md-footer{ background: linear-gradient(180deg, #0f1115, #0b0d11); border-top-color: rgba(255,255,255,0.06) }
  .md-content__inner{ background:#0f1115; border-color:#1f232a; box-shadow: 0 10px 30px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.05) }
  .md-content__inner::before{ opacity: .25 }
  .md-sidebar--primary,.md-sidebar--secondary{ background:#0b0d11; border-right-color:#1f232a }
  .md-typeset .md-button,
  .md-clipboard,
  .md-search__input,
  .md-typeset button{ border-color: rgba(255,255,255,0.08); box-shadow: 0 1px 0 rgba(255,255,255,0.06) inset, 0 1px 6px rgba(0,0,0,0.3) }
}

/* Interactive elements: subtle textured look */
.md-typeset .md-button,
.md-clipboard,
.md-search__input,
.md-typeset button{
  background-image: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(249,250,251,0.85)), var(--noise);
  background-blend-mode: overlay, normal;
  border: 1px solid rgba(0,0,0,0.08);
  border-radius: 8px;
  box-shadow: 0 1px 0 rgba(255,255,255,0.7) inset, 0 1px 6px rgba(0,0,0,0.04);
}
.md-typeset .md-button--primary{ 
  background-image: linear-gradient(180deg, var(--md-primary-fg-color), var(--md-primary-fg-color--dark)), var(--noise);
  color:#fff; border-color: rgba(0,0,0,0.15);
}
.md-typeset .md-button:hover,
.md-clipboard:hover{
  transform: translateY(-0.5px);
  box-shadow: 0 1px 0 rgba(255,255,255,0.8) inset, 0 6px 18px rgba(0,0,0,0.08);
}
.md-search__input{
  border-radius: 10px;
}
.md-typeset input,
.md-typeset select,
.md-typeset textarea{
  background: #ffffff;
  border:1px solid var(--color-line);
  border-radius:8px;
  box-shadow: 0 1px 0 rgba(255,255,255,0.7) inset;
}

/* Restore readable link styling (don’t make all anchors look like buttons) */
.md-typeset a:not(.md-button){
  background: none;
  border: 0;
  border-radius: 0;
  box-shadow: none;
  text-decoration: underline;
  text-decoration-color: rgba(0,0,0,0.25);
}
.md-typeset a:not(.md-button):hover{
  text-decoration-color: rgba(0,0,0,0.5);
}
/* Don’t underline image-only links (badges, logos) */
.md-typeset a:has(> img){
  text-decoration: none !important;
}
.md-typeset a > img{
  vertical-align: middle;
}

/* Content comfort and overflow handling */
.md-content__inner{
  padding: 1rem 1.25rem; /* previously 0.2px: add breathing room */
}
@media (min-width: 1024px){
  .md-content__inner{ padding: 1.25rem 1.5rem }
}

/* Prevent images and tables from overflowing the content box */
.md-typeset img{
  max-width: 100%;
  height: auto;
}
.md-typeset table{
  display: block;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
.md-typeset pre{ overflow-x: auto }

/* Subtle meta badges under H1 */
.doc-meta{ display:flex; gap:.5rem; align-items:center; margin:.25rem 0 1rem }
.badge, .status-badge{
  display:inline-block; line-height:1; white-space:nowrap;
  font-size:.72em; font-weight:700; letter-spacing:.02em;
  padding:.28em .55em; border-radius:9999px;
  border:1px solid rgba(17,24,39,.08);
  color: var(--color-muted);
  background: rgba(17,24,39,.06);
}
.status-badge.status-planned{      color: var(--color-muted); background: rgba(107,114,128,.12); border-color: rgba(107,114,128,.25) }
.status-badge.status-experimental{ color: var(--status-warn); background: rgba(var(--status-warn-rgb),.075); border-color: rgba(var(--status-warn-rgb),.22) }
.status-badge.status-beta{         color: var(--status-info); background: rgba(var(--status-info-rgb),.075); border-color: rgba(var(--status-info-rgb),.22) }
.status-badge.status-stable{       color:var(--md-primary-fg-color--dark); background: rgba(var(--md-primary-rgb), .12); border-color: rgba(var(--md-primary-dark-rgb), .25) }
.status-badge.status-deprecated{   color: var(--status-bad); background: rgba(var(--status-bad-rgb),.12); border-color: rgba(var(--status-bad-rgb),.25) }
.type-badge{ color: var(--color-accent-teal-strong); background: rgba(var(--color-accent-teal-strong-rgb),.10); border-color: rgba(var(--color-accent-teal-strong-rgb),.25) }
.updated-badge{ color: var(--color-muted); background: rgba(17,24,39,.06); border-color: rgba(17,24,39,.15) }

@media (prefers-color-scheme: dark){
  .badge, .status-badge{ border-color: rgba(255,255,255,.08); color:var(--color-ink); background: rgba(255,255,255,.06) }
  .status-badge.status-planned{      color:var(--color-ink); background: rgba(229,231,235,.08); border-color: rgba(229,231,235,.18) }
  .status-badge.status-experimental{ color:var(--status-warn); background: rgba(var(--status-warn-rgb),.20); border-color: rgba(var(--status-warn-rgb),.34) }
  .status-badge.status-beta{         color:var(--status-info); background: rgba(var(--status-info-rgb),.20); border-color: rgba(var(--status-info-rgb),.34) }
  .status-badge.status-stable{       color:#dca777; background: rgba(184,115,51,.15);   border-color: rgba(145,90,41,.28) }
  .status-badge.status-deprecated{   color:var(--status-bad); background: rgba(var(--status-bad-rgb),.18);   border-color: rgba(var(--status-bad-rgb),.32) }
  .type-badge{ color: var(--color-accent-teal-strong); background: rgba(var(--color-accent-teal-strong-rgb),.18); border-color: rgba(var(--color-accent-teal-strong-rgb),.3) }
  .updated-badge{ color:var(--color-muted); background: rgba(148,163,184,.16); border-color: rgba(148,163,184,.3) }
  .md-typeset h1.topic-expansive::after,
  .md-typeset h2.topic-expansive::after,
  .md-typeset h3.topic-expansive::after,
  .md-typeset h4.topic-expansive::after{ background: linear-gradient(90deg, var(--color-accent-teal-strong), rgba(var(--color-accent-teal-strong-rgb),.78)) }
  .md-typeset h1.topic-complex::after,
  .md-typeset h2.topic-complex::after,
  .md-typeset h3.topic-complex::after,
  .md-typeset h4.topic-complex::after{ background: linear-gradient(90deg, rgba(145,90,41,.92), var(--color-brand-copper)) }
  .md-typeset h1.topic-complicated::after,
  .md-typeset h2.topic-complicated::after,
  .md-typeset h3.topic-complicated::after,
  .md-typeset h4.topic-complicated::after{ background: linear-gradient(90deg, rgba(15,23,42,.88), var(--color-accent-teal-strong)) }
}

/* Topic markers (legacy single badges) */
.md-typeset h1.topic-expansive::after,
.md-typeset h2.topic-expansive::after,
.md-typeset h3.topic-expansive::after,
.md-typeset h4.topic-expansive::after {
  content: "expansive topic";
  display: inline-block;
  margin-left: .6rem;
  padding: .2em .6em;
  font-weight: 600;
  font-size: .65em;
  line-height: 1;
  color: #ffffff;
  background: linear-gradient(90deg, var(--color-accent-teal-strong), var(--color-accent-teal-light));
  border-radius: 9999px;
  vertical-align: middle;
}

.md-typeset h1.topic-complex::after,
.md-typeset h2.topic-complex::after,
.md-typeset h3.topic-complex::after,
.md-typeset h4.topic-complex::after {
  content: "complex topic";
  display: inline-block;
  margin-left: .6rem;
  padding: .2em .6em;
  font-weight: 600;
  font-size: .65em;
  line-height: 1;
  color: #ffffff;
  background: linear-gradient(90deg, var(--color-brand-copper-dark), var(--color-brand-copper));
  border-radius: 9999px;
  vertical-align: middle;
}

.md-typeset h1.topic-complicated::after,
.md-typeset h2.topic-complicated::after,
.md-typeset h3.topic-complicated::after,
.md-typeset h4.topic-complicated::after {
  content: "complicated topic";
  display: inline-block;
  margin-left: .6rem;
  padding: .2em .6em;
  font-weight: 600;
  font-size: .65em;
  line-height: 1;
  color: #ffffff;
  background: linear-gradient(90deg, var(--color-brand-copper-dark), var(--color-accent-teal-strong));
  border-radius: 9999px;
  vertical-align: middle;
}

/* Topic trio — always show all three markers together
   Set per-heading strengths with CSS variables on the element:
   { .topic-trio style="--exp:.9; --complex:.7; --complicated:.3" }
*/
.md-typeset h1.topic-trio::after,
.md-typeset h2.topic-trio::after,
.md-typeset h3.topic-trio::after,
.md-typeset h4.topic-trio::after {
  /* Labels with per-topic values */
  content: "expansive " attr(data-exp) "  •  "
           "complex " attr(data-complex) "  •  "
           "complicated " attr(data-complicated);
  display: inline-block;
  margin-left: .6rem;
  padding: .25em .6em;
  border-radius: 10px;
  font-size: .62em;
  font-weight: 600;
  line-height: 1.2;
  letter-spacing: .01em;
  color: #ffffff;
  vertical-align: .15em;
  /* three segment backgrounds */
  background-image:
    linear-gradient(90deg, rgba(var(--md-accent-rgb), var(--exp, var(--topic-exp-default))), rgba(var(--md-accent-light-rgb), var(--exp, var(--topic-exp-default)))),
    linear-gradient(90deg, rgba(var(--md-primary-dark-rgb), var(--complex, var(--topic-complex-default))), rgba(var(--md-primary-rgb), var(--complex, var(--topic-complex-default)))),
    linear-gradient(90deg, rgba(var(--md-primary-rgb), var(--complicated, var(--topic-complicated-default))), rgba(var(--md-accent-rgb), var(--complicated, var(--topic-complicated-default))));
  background-size: calc(100%/3) 100%, calc(100%/3) 100%, calc(100%/3) 100%;
  background-position: left center, center center, right center;
  background-repeat: no-repeat;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.08), 0 1px 0 rgba(0,0,0,0.05);
  text-shadow: 0 1px 0 rgba(0,0,0,0.25);
}

/* High contrast preferences */
@media (prefers-contrast: more){
  .md-content__inner{ box-shadow: none; border-width: 2px }
  .md-typeset .md-button{ box-shadow: none }
  .md-typeset a:not(.md-button){ text-decoration-thickness: .14em; text-underline-offset: .18em }
}

@media (forced-colors: active){
  * { forced-color-adjust: none }
  .md-content__inner{ background: Canvas; color: CanvasText; border-color: ButtonText }
  .md-typeset .md-button{ background: ButtonFace; color: ButtonText; border-color: ButtonText }
  .md-sidebar--primary,.md-sidebar--secondary{ background: Canvas; border-color: ButtonText }
}
