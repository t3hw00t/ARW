---
title: Feature Matrix
---

<!-- generated by scripts/gen_feature_matrix.py; do not edit by hand (source ts: 2025-10-02T11:01:23+02:00) -->

# Feature Matrix

Updated: 2025-10-02
Status: Stable
Type: Reference

Microsummary:
- Living inventory of shipped features across kernel and optional packs.
- Generated from interfaces/features.json and cross-validated against topic constants and source paths.
- Lists scope tags, owners, dependencies, HTTP endpoints, read-models, events, environment knobs, and references.
- Regenerate with `just features-gen` whenever feature metadata changes.

This page is generated from [interfaces/features.json](https://github.com/t3hw00t/ARW/blob/main/interfaces/features.json) and validated against code (topics and file paths).

## Model Steward

Manage local models with safe HTTP download, resume, checksum verification, CAS storage, quotas, live progress, metrics, and concurrency controls.

- Scope: Core kernel / backend / admin / core / complete
- Owner: platform
- Depends on:
  - event_spine
  - guardrail_gateway
- Single Sources of Truth:
  - [apps/arw-server/src/models.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/models.rs)
  - [apps/arw-server/src/api/models.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/models.rs)
  - [apps/arw-server/src/util.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/util.rs)
  - [crates/arw-topics/src/lib.rs](https://github.com/t3hw00t/ARW/blob/main/crates/arw-topics/src/lib.rs)
- HTTP:
  - `GET /admin/models/summary`
  - `POST /admin/models/download`
  - `POST /admin/models/download/cancel`
  - `POST /admin/models/cas_gc`
  - `GET /admin/models/concurrency`
  - `POST /admin/models/concurrency`
  - `GET /admin/models/jobs`
  - `GET /state/models_metrics`
  - `GET /state/models_hashes`
  - `GET /state/models`
- Read‑models:
  - `models`
  - `models_metrics`
- Events:
  - `models.download.progress`
  - `models.changed`
  - `models.manifest.written`
  - `models.cas.gc`
  - `models.refreshed`
  - `state.read.model.patch`
- Env:
  - `ARW_MODELS_MAX_MB`
  - `ARW_MODELS_DISK_RESERVE_MB`
  - `ARW_MODELS_MAX_CONC`
  - `ARW_MODELS_MAX_CONC_HARD`
  - `ARW_MODELS_QUOTA_MB`
- References:
  - [architecture/artifacts_provenance.md](../architecture/artifacts_provenance.md)

## Event Spine

Unified in-process bus + SSE stream; maintains compact read-models and publishes JSON Patch deltas for low-latency UIs.

- Scope: Core kernel / backend / dev / connectivity / complete
- Owner: platform
- Single Sources of Truth:
  - [apps/arw-server/src/main.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/main.rs)
  - [apps/arw-server/src/api/events.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/events.rs)
  - [apps/arw-server/src/read_models.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/read_models.rs)
  - [crates/arw-topics/src/lib.rs](https://github.com/t3hw00t/ARW/blob/main/crates/arw-topics/src/lib.rs)
- HTTP:
  - `GET /events`
- Read‑models:
  - `models`
  - `models_metrics`
  - `episodes`
  - `projects`
  - `route_stats`
  - `snappy`
- Events:
  - `state.read.model.patch`
- References:
  - [architecture/sse_patch_contract.md](../architecture/sse_patch_contract.md)

## Snappy Governor

Latency budgets and route observability; publishes budgets vs. measured p95 and breach notices.

- Scope: Core kernel / backend / dev / core / complete
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/api/metrics.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/metrics.rs)
  - [apps/arw-server/src/metrics.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/metrics.rs)
- HTTP:
  - `GET /metrics`
  - `GET /state/route_stats`
- Read‑models:
  - `route_stats`
  - `snappy`
- Events:
  - `snappy.notice`
  - `snappy.detail`
  - `state.read.model.patch`
- Env:
  - `ARW_SNAPPY_I2F_P95_MS`
  - `ARW_SNAPPY_FIRST_PARTIAL_P95_MS`
  - `ARW_SNAPPY_FULL_RESULT_P95_MS`
  - `ARW_SNAPPY_PUBLISH_MS`
- References:
  - [architecture/runtime_layout.md](../architecture/runtime_layout.md)
  - [architecture/performance.md](../architecture/performance.md)

## Tool Forge

Tool registry with schema introspection and an Action Cache (in-memory TTL + CAS) with singleflight.

- Scope: Core kernel / backend / admin / core / complete
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/tools.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/tools.rs)
  - [apps/arw-server/src/api/tools.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/tools.rs)
- HTTP:
  - `GET /admin/tools`
  - `POST /admin/tools/run`
  - `GET /admin/tools/cache_stats`
  - `GET /state/models_metrics`
- Events:
  - `task.completed`
- Env:
  - `ARW_TOOLS_CACHE_CAP`
  - `ARW_TOOLS_CACHE_TTL_SECS`
  - `ARW_POLICY_VERSION`
  - `ARW_SECRETS_VERSION`
- References:
  - [architecture/cache_policy.md](../architecture/cache_policy.md)
  - [architecture/caching_layers.md](../architecture/caching_layers.md)

## Screenshot Capture Pipeline

Screen/window/region capture with annotate/blur, gallery, Save to project, and optional OCR for agents and operators.

- Scope: Opt-in pack / runtime / admin / auxiliary / complete
- Owner: platform
- Depends on:
  - tool_forge
  - policy_leases
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/tools.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/tools.rs)
  - [apps/arw-server/src/tools/projects.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/tools/projects.rs)
  - [apps/arw-launcher/src-tauri/ui/common.js](https://github.com/t3hw00t/ARW/blob/main/apps/arw-launcher/src-tauri/ui/common.js)
  - [guide/screenshots.md](../guide/screenshots.md)
- HTTP:
  - `POST /admin/tools/run`
- Events:
  - `screenshots.captured`
- References:
  - [architecture/screenshot_capture_pipeline.md](../architecture/screenshot_capture_pipeline.md)
  - [guide/screenshots.md](../guide/screenshots.md)

## Chat Workbench

Debug chat UI surface with synthetic replies or llama/OpenAI backends; planner hints, optional self-consistency and verifier (gated).

- Scope: Opt-in pack / backend / admin / auxiliary / complete
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/context_loop.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/context_loop.rs)
  - [apps/arw-server/src/api/context.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/context.rs)
- HTTP:
  - `GET /admin/chat`
  - `POST /admin/chat/send`
  - `POST /admin/chat/clear`
  - `GET /admin/chat/status`
- Events:
  - `chat.message`
  - `chat.planner`
  - `chat.probe`
- Env:
  - `ARW_LLAMA_URL`
  - `ARW_LLAMA_N_PREDICT`
  - `ARW_LLAMA_TOP_P`
  - `ARW_LLAMA_TOP_K`
  - `ARW_LLAMA_MIN_P`
  - `ARW_LLAMA_REPEAT_PENALTY`
  - `ARW_LLAMA_STOP`
  - `ARW_OPENAI_API_KEY`
  - `ARW_OPENAI_BASE_URL`
  - `ARW_OPENAI_MODEL`
  - `ARW_OPENAI_MAX_TOKENS`
  - `ARW_OPENAI_TOP_P`
  - `ARW_OPENAI_FREQUENCY_PENALTY`
  - `ARW_OPENAI_PRESENCE_PENALTY`
  - `ARW_OPENAI_STOP`
  - `ARW_CHAT_DEFAULT_TEMPERATURE`
  - `ARW_CHAT_DEFAULT_VOTE_K`

## Memory Lanes

Local-first memory with lanes (ephemeral/episodic/semantic/procedural) plus admin helpers to inspect and apply items.

- Scope: Core kernel / backend / admin / core / complete
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/api/memory.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/memory.rs)
- HTTP:
  - `GET /admin/memory`
  - `POST /admin/memory/apply`
- Events:
  - `memory.applied`
- Env:
  - `ARW_MEM_LIMIT`

## Project Hub Primitives

Projects tree/creation/notes and safe file IO (atomic write, SHA precondition), with audit/events.

- Scope: Core kernel / backend / admin / core / complete
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/api/projects.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/projects.rs)
  - [apps/arw-server/src/util.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/util.rs)
- HTTP:
  - `GET /state/projects`
  - `POST /projects`
  - `GET /state/projects/{proj}/tree`
  - `GET /state/projects/{proj}/notes`
  - `PUT /projects/{proj}/notes`
  - `GET /state/projects/{proj}/file`
  - `PUT /projects/{proj}/file`
  - `PATCH /projects/{proj}/file`
  - `POST /projects/{proj}/import`
  - `POST /projects/{proj}/snapshot`
  - `GET /projects/{proj}/snapshots`
  - `POST /projects/{proj}/snapshots/{snapshot}/restore`
- Events:
  - `projects.created`
  - `projects.file.written`
  - `projects.snapshot.created`
  - `projects.snapshot.restored`
- Env:
  - `ARW_PROJECTS_DIR`
  - `ARW_PROJECT_MAX_FILE_MB`

## Feedback Loop

Near-live suggestions and policy with persisted state, supporting guidance to improve runs.

- Scope: Core kernel / backend / admin / helpers / complete
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/feedback.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/feedback.rs)
  - [apps/arw-server/src/api/feedback.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/feedback.rs)
- HTTP:
  - `GET /admin/feedback/suggestions`
  - `GET /admin/feedback/updates`
  - `GET /admin/feedback/policy`
- Events:
  - `feedback.suggested`
  - `feedback.applied`

## Identity & Tenancy

Layered principals align policies, storage, and audit scopes to User, Project, and AgentInstance boundaries.

- Scope: Core kernel / workspace / operators / governance / beta
- Owner: platform
- Depends on:
  - policy_leases
- Single Sources of Truth:
  - [apps/arw-server/src/capsule_guard.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/capsule_guard.rs)
  - [crates/arw-core/src/gating.rs](https://github.com/t3hw00t/ARW/blob/main/crates/arw-core/src/gating.rs)
- HTTP:
  - `GET /state/policy`
- Events:
  - `policy.decision`
  - `policy.capsule.applied`
  - `policy.capsule.failed`
  - `policy.capsule.teardown`
- Env:
  - `ARW_SECURITY_POSTURE`
- References:
  - [architecture/identity_tenancy.md](../architecture/identity_tenancy.md)
  - [guide/policy_permissions.md](../guide/policy_permissions.md)
  - [architecture/capability_consent_ledger.md](../architecture/capability_consent_ledger.md)

## Federated Clustering

Shared node registry and adverts for optional multi-node deployments.

- Scope: Core kernel / runtime / operators / infrastructure / plan
- Owner: platform
- Depends on:
  - identity_tenancy
- Single Sources of Truth:
  - [apps/arw-server/src/cluster.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/cluster.rs)
  - [apps/arw-server/src/api/state.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/state.rs)
- HTTP:
  - `GET /state/cluster`
- Read‑models:
  - `cluster_nodes`
- Events:
  - `cluster.node.advertise`
  - `cluster.node.changed`
- References:
  - [architecture/cluster_federation.md](../architecture/cluster_federation.md)

## Experiment Deck

Define variants, run A/B on goldens, publish results and winner; apply hints.

- Scope: Opt-in pack / backend / admin / core / complete
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/experiments.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/experiments.rs)
  - [apps/arw-server/src/api/experiments.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/experiments.rs)
- HTTP:
  - `POST /admin/experiments/start`
  - `GET /admin/experiments/list`
  - `GET /admin/experiments/winners`
  - `GET /admin/experiments/scoreboard`
  - `POST /admin/experiments/run`
  - `POST /admin/experiments/activate`
- Events:
  - `experiment.result`
  - `experiment.winner`

## Self Card + Forecasts

Per-agent identity and competence, with periodic aggregates for forecasts and resource curves.

- Scope: Core kernel / backend / admin / helpers / complete
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/api/state.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/state.rs)
  - [apps/arw-server/src/self_model.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/self_model.rs)
  - [apps/arw-server/src/api/self_model.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/self_model.rs)
- HTTP:
  - `GET /state/self`
  - `GET /state/self/:agent`
  - `POST /admin/self_model/propose`
  - `POST /admin/self_model/apply`
- Events:
  - `self.model.proposed`
  - `self.model.updated`
- References:
  - [architecture/self_model.md](../architecture/self_model.md)

## Project Map (World Model)

Observations folded into beliefs/intents/actions and stitched episodes for a scoped project world model.

- Scope: Core kernel / backend / admin / connectivity / complete
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/api/state.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/state.rs)
  - [apps/arw-server/src/state_observer.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/state_observer.rs)
  - [apps/arw-server/src/world.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/world.rs)
- HTTP:
  - `GET /state/observations`
  - `GET /state/beliefs`
  - `GET /state/intents`
  - `GET /state/actions`
  - `GET /state/episodes`
- Events:
  - `world.updated`
- References:
  - [architecture/object_graph.md](../architecture/object_graph.md)

## Guardrail Gateway (Policy + Egress)

Ingress/egress policy gating with previews and append-only egress ledger. Full proxy/DNS guard is planned.

- Scope: Remote collaborator pack / backend / admin / connectivity / partial
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/egress_proxy.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/egress_proxy.rs)
  - [crates/arw-topics/src/lib.rs](https://github.com/t3hw00t/ARW/blob/main/crates/arw-topics/src/lib.rs)
  - [architecture/egress_firewall.md](../architecture/egress_firewall.md)
- HTTP:
  - `POST /policy/guardrails/apply`
- Events:
  - `egress.preview`
  - `egress.ledger.appended`
  - `policy.guardrails.applied`
- Env:
  - `ARW_EGRESS_LEDGER_ENABLE`
  - `ARW_NET_POSTURE`

## Asimov Capsule Guard

Always-enforced capsule propagation that refreshes leases, scopes reversible denies, and instruments adoption across the runtime.

- Scope: Future pack / backend / admin / security / alpha
- Owner: platform
- Depends on:
  - guardrail_gateway
  - policy_leases
  - event_spine
- Single Sources of Truth:
  - [crates/arw-core/src/gating.rs](https://github.com/t3hw00t/ARW/blob/main/crates/arw-core/src/gating.rs)
  - [crates/arw-core/src/rpu.rs](https://github.com/t3hw00t/ARW/blob/main/crates/arw-core/src/rpu.rs)
  - [apps/arw-server/src/security.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/security.rs)
  - [architecture/asimov_capsule_guard.md](../architecture/asimov_capsule_guard.md)
- HTTP:
  - `ANY /admin/* (X-ARW-Capsule)`
- Events:
  - `policy.decision`
  - `rpu.trust.changed`
- Env:
  - `ARW_TRUST_CAPSULES`
  - `ARW_GATING_DENY`
- References:
  - [architecture/asimov_capsule_guard.md](../architecture/asimov_capsule_guard.md)

## Orchestrator Plane

Local queue for tasks with optional NATS bridge and background worker(s) for offloads.

- Scope: Remote collaborator pack / backend / dev / connectivity / complete
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/worker.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/worker.rs)
  - [apps/arw-connector/src/main.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-connector/src/main.rs)
  - [apps/arw-server/src/api/orchestrator.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/orchestrator.rs)
- HTTP:
  - `GET /orchestrator/mini_agents`
  - `POST /orchestrator/mini_agents/start_training`
  - `POST /orchestrator/runtimes/{id}/restore`
  - `GET /state/orchestrator/jobs`
- Events:
  - `task.completed`
  - `runtime.restore.requested`
  - `runtime.restore.completed`
- Env:
  - `ARW_NATS_URL`
  - `ARW_NODE_ID`
  - `ARW_NATS_OUT`
- References:
  - [architecture/agent_orchestrator.md](../architecture/agent_orchestrator.md)

## Autonomy Lane Controls

Pause/resume lanes, flush queues, capture snapshots, and manage budgets for trusted autonomy runs.

- Scope: Remote collaborator pack / backend / operators / governance / beta
- Owner: platform
- Depends on:
  - project_hub
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/api/autonomy.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/autonomy.rs)
  - [apps/arw-server/src/api/projects.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/projects.rs)
  - [scripts/autonomy_rollback.sh](https://github.com/t3hw00t/ARW/blob/main/scripts/autonomy_rollback.sh)
- HTTP:
  - `POST /admin/autonomy/{lane}/pause`
  - `POST /admin/autonomy/{lane}/resume`
  - `DELETE /admin/autonomy/{lane}/jobs`
  - `POST /admin/autonomy/{lane}/budgets`
  - `POST /projects/{proj}/snapshot`
  - `GET /projects/{proj}/snapshots`
  - `POST /projects/{proj}/snapshots/{snapshot}/restore`
- Events:
  - `autonomy.run.paused`
  - `autonomy.run.resumed`
  - `autonomy.interrupt`
  - `autonomy.budget.updated`
  - `projects.snapshot.restored`
- Env:
  - `ARW_PROJECTS_DIR`
  - `ARW_PROJECT_MAX_FILE_MB`
- References:
  - [spec/autonomy_lane.md](../spec/autonomy_lane.md)
  - [ops/trials/autonomy_rollback_playbook.md](../ops/trials/autonomy_rollback_playbook.md)

## Interface Registry & Specs

Descriptors and generated OpenAPI/AsyncAPI/MCP schemas with drift checks and deprecation headers.

- Scope: Core kernel / dev / dev / auxiliary / complete
- Owner: platform
- Single Sources of Truth:
  - [interfaces/index.yaml](https://github.com/t3hw00t/ARW/blob/main/interfaces/index.yaml)
  - [apps/arw-server/src/main.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/main.rs)
  - [apps/arw-server/src/api/spec.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/spec.rs)
- HTTP:
  - `GET /spec/openapi.yaml`
  - `GET /spec/asyncapi.yaml`
  - `GET /spec/mcp-tools.json`

## Triad Kernel & Unified API

Journal-backed actions/events/state plane with SSE replay, contributions ledger, and discoverable metadata for the new server.

- Scope: Core kernel / backend / dev / core / beta
- Owner: platform
- Depends on:
  - event_spine
- Single Sources of Truth:
  - [apps/arw-server/src/main.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/main.rs)
  - [apps/arw-server/src/api/actions.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/actions.rs)
  - [apps/arw-server/src/api/events.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/events.rs)
  - [apps/arw-server/src/api/state.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/state.rs)
  - [crates/arw-kernel/src/lib.rs](https://github.com/t3hw00t/ARW/blob/main/crates/arw-kernel/src/lib.rs)
- HTTP:
  - `POST /actions`
  - `GET /actions/:id`
  - `POST /actions/:id/state`
  - `GET /events`
  - `GET /state/episodes`
  - `GET /state/actions`
  - `GET /state/contributions`
  - `GET /state/route_stats`
  - `GET /healthz`
  - `GET /about`
- Events:
  - `actions.submitted`
  - `actions.running`
  - `actions.completed`
  - `actions.failed`
- Env:
  - `ARW_ACTIONS_QUEUE_MAX`
  - `ARW_STATE_DIR`
  - `ARW_PORT`
  - `ARW_BIND`
  - `ARW_PERF_PRESET`
  - `ARW_HTTP_MAX_CONC`

## Policy & Lease Facade

ABAC facade with hot reloadable policies, lease issuance, and decision telemetry for capability-gated actions.

- Scope: Core kernel / backend / admin / security / beta
- Owner: platform
- Depends on:
  - triad_kernel
- Single Sources of Truth:
  - [apps/arw-server/src/api/policy.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/policy.rs)
  - [apps/arw-server/src/api/leases.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/leases.rs)
  - [crates/arw-policy/src/lib.rs](https://github.com/t3hw00t/ARW/blob/main/crates/arw-policy/src/lib.rs)
- HTTP:
  - `GET /state/policy`
  - `POST /policy/reload`
  - `POST /policy/simulate`
  - `POST /leases`
  - `GET /state/leases`
- Events:
  - `policy.decision`
  - `policy.reloaded`
- Env:
  - `ARW_POLICY_FILE`
  - `ARW_SECURITY_POSTURE`
- References:
  - [GATING_KEYS.md](../GATING_KEYS.md)
  - [guide/policy_permissions.md](../guide/policy_permissions.md)
  - [crates/arw-core/src/gating.rs](https://github.com/t3hw00t/ARW/blob/main/crates/arw-core/src/gating.rs)

## Egress Sentinel

Preview-first egress guard with allowlists, IP/DNS defenses, ledger logging, and runtime posture controls.

- Scope: Core kernel / backend / admin / security / beta
- Owner: platform
- Depends on:
  - policy_leases
- Single Sources of Truth:
  - [apps/arw-server/src/api/egress.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/egress.rs)
  - [apps/arw-server/src/api/egress_settings.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/egress_settings.rs)
  - [apps/arw-server/src/egress_proxy.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/egress_proxy.rs)
- HTTP:
  - `POST /egress/preview`
  - `POST /egress/settings`
  - `GET /state/egress`
  - `GET /state/egress/settings`
- Events:
  - `egress.ledger.appended`
  - `egress.settings.updated`
- Env:
  - `ARW_NET_POSTURE`
  - `ARW_SECURITY_POSTURE`
  - `ARW_NET_ALLOWLIST`
  - `ARW_EGRESS_BLOCK_IP_LITERALS`
  - `ARW_DNS_GUARD_ENABLE`
  - `ARW_EGRESS_PROXY_ENABLE`
  - `ARW_EGRESS_PROXY_PORT`
  - `ARW_EGRESS_LEDGER_ENABLE`
- References:
  - [architecture/egress_firewall.md](../architecture/egress_firewall.md)
  - [guide/network_posture.md](../guide/network_posture.md)

## Working Set Builder

Hybrid retrieval with coverage loops, streaming diagnostics, and on-demand rehydrate for just-in-time context (stable pointers include `memory` ids and `file` heads).

- Scope: Core kernel / backend / builder / intelligence / beta
- Owner: platform
- Depends on:
  - triad_kernel
- Single Sources of Truth:
  - [apps/arw-server/src/api/context.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/context.rs)
  - [apps/arw-server/src/working_set.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/working_set.rs)
  - [apps/arw-server/src/coverage.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/coverage.rs)
- HTTP:
  - `POST /context/assemble`
  - `POST /context/rehydrate`
- Events:
  - `working_set.started`
  - `working_set.seed`
  - `working_set.expanded`
  - `working_set.expand_query`
  - `working_set.selected`
  - `working_set.completed`
  - `working_set.iteration.summary`
  - `working_set.error`
- Env:
  - `ARW_CONTEXT_LANES_DEFAULT`
  - `ARW_CONTEXT_K`
  - `ARW_CONTEXT_EXPAND_PER_SEED`
  - `ARW_CONTEXT_DIVERSITY_LAMBDA`
  - `ARW_CONTEXT_MIN_SCORE`
  - `ARW_CONTEXT_LANE_BONUS`
  - `ARW_CONTEXT_EXPAND_QUERY`
  - `ARW_CONTEXT_EXPAND_QUERY_TOP_K`
  - `ARW_CONTEXT_SCORER`
  - `ARW_CONTEXT_COVERAGE_MAX_ITERS`
  - `ARW_CONTEXT_STREAM_DEFAULT`
- References:
  - [architecture/context_working_set.md](../architecture/context_working_set.md)

## Memory Atlas

Memory overlay service backed by the canonical MAL store with hybrid retrieval, explainable packing, and stable pointers (`ptr.kind: "memory"`).

- Scope: Core kernel / backend / builder / intelligence / beta
- Owner: platform
- Depends on:
  - triad_kernel
- Single Sources of Truth:
  - [apps/arw-server/src/api/actions.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/actions.rs)
  - [apps/arw-server/src/read_models.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/read_models.rs)
  - [apps/arw-server/src/working_set.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/working_set.rs)
  - [apps/arw-server/src/api/memory.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/memory.rs)
- HTTP:
  - `POST /actions (memory.upsert)`
  - `POST /actions (memory.search)`
  - `POST /actions (memory.pack)`
  - `GET /state/memory`
  - `GET /state/memory/recent`
- Read‑models:
  - `memory`
- Events:
  - `memory.item.upserted`
  - `memory.item.expired`
  - `memory.pack.journaled`
- References:
  - [architecture/memory_abstraction.md](../architecture/memory_abstraction.md)
  - [architecture/memory_lifecycle.md](../architecture/memory_lifecycle.md)
  - [architecture/memory_overlay_service.md](../architecture/memory_overlay_service.md)

## Config Plane

Schema-aware config snapshots, diffable patches, and validation helpers for runtime tuning.

- Scope: Core kernel / backend / admin / core / beta
- Owner: platform
- Depends on:
  - triad_kernel
- Single Sources of Truth:
  - [apps/arw-server/src/api/config.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/config.rs)
- HTTP:
  - `GET /state/config`
  - `GET /state/config/snapshots`
  - `GET /state/config/snapshots/:id`
  - `POST /patch/apply`
  - `POST /patch/apply (dry_run=true)`
  - `POST /patch/revert`
  - `POST /patch/validate`
  - `GET /state/schema_map`
  - `POST /patch/infer_schema`
- Events:
  - `config.patch.applied`
  - `logic.unit.reverted`
- Env:
  - `ARW_SCHEMA_MAP`
- References:
  - [architecture/config_patch_engine.md](../architecture/config_patch_engine.md)
  - [configs/schema_map.json](https://github.com/t3hw00t/ARW/blob/main/configs/schema_map.json)

## Managed Runtime Supervisor

Policy-aligned lifecycle manager for local text, audio, and vision runtimes with accelerator profiles, health telemetry, and failover orchestration.

- Scope: Core kernel / backend / operators / infrastructure / plan
- Owner: platform
- Depends on:
  - model_steward
  - config_plane
  - policy_leases
  - egress_sentinel
- Single Sources of Truth:
  - [architecture/managed_runtime_supervisor.md](../architecture/managed_runtime_supervisor.md)
- HTTP:
  - `GET /state/runtime_matrix`
  - `POST /orchestrator/runtimes/{id}/restore`
- Read‑models:
  - `runtime_matrix`
- Events:
  - `runtime.state.changed`
  - `runtime.claim.request`
  - `runtime.claim.acquired`
  - `runtime.claim.released`
  - `runtime.health`
  - `runtime.restore.requested`
  - `runtime.restore.completed`
- References:
  - [architecture/multimodal_runtime_plan.md](../architecture/multimodal_runtime_plan.md)
  - [architecture/managed_llamacpp_runtime.md](../architecture/managed_llamacpp_runtime.md)

## Logic Units Library

Declarative strategy packs with install/apply/revert flows, schema validation, and audit trails.

- Scope: Opt-in pack / backend / admin / core / beta
- Owner: platform
- Depends on:
  - config_plane
- Single Sources of Truth:
  - [apps/arw-server/src/api/logic_units.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/logic_units.rs)
  - [apps/arw-server/src/api/config.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/config.rs)
  - [spec/schemas/logic_unit_manifest.json](https://github.com/t3hw00t/ARW/blob/main/spec/schemas/logic_unit_manifest.json)
- HTTP:
  - `GET /logic-units`
  - `GET /state/logic_units`
  - `POST /logic-units/install`
  - `POST /logic-units/apply`
  - `POST /logic-units/revert`
- Events:
  - `logic.unit.installed`
  - `logic.unit.applied`
  - `logic.unit.reverted`
  - `config.patch.applied`
- Env:
  - `ARW_SCHEMA_MAP`

## Connectors Registry

Connector manifests with scoped tokens, audit-friendly storage, and events for cloud/local integrations.

- Scope: Remote collaborator pack / backend / admin / connectivity / beta
- Owner: platform
- Depends on:
  - policy_leases
  - egress_sentinel
- Single Sources of Truth:
  - [apps/arw-server/src/api/connectors.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/api/connectors.rs)
- HTTP:
  - `GET /state/connectors`
  - `POST /connectors/register`
  - `POST /connectors/token`
- Events:
  - `connectors.registered`
  - `connectors.token.updated`
- Env:
  - `ARW_STATE_DIR`

## WASI Tool Host

Embeddable WASI host with http.fetch, connector token injection, and policy-aware allowlists for future plugins.

- Scope: Future pack / runtime / dev / core / alpha
- Owner: platform
- Depends on:
  - egress_sentinel
- Single Sources of Truth:
  - [crates/arw-wasi/src/lib.rs](https://github.com/t3hw00t/ARW/blob/main/crates/arw-wasi/src/lib.rs)
  - [apps/arw-server/src/main.rs](https://github.com/t3hw00t/ARW/blob/main/apps/arw-server/src/main.rs)
- Events:
  - `egress.ledger.appended`
- Env:
  - `ARW_HTTP_TIMEOUT_SECS`
  - `ARW_EGRESS_PROXY_ENABLE`
  - `ARW_EGRESS_PROXY_PORT`
  - `ARW_NET_ALLOWLIST`
  - `ARW_EGRESS_BLOCK_IP_LITERALS`
  - `ARW_DNS_GUARD_ENABLE`
  - `ARW_STATE_DIR`
