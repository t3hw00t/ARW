image:
  repository: ghcr.io/t3hw00t/arw-server
  tag: latest
  pullPolicy: IfNotPresent
  pullSecrets: []

service:
  type: ClusterIP
  port: 8091

env:
  ARW_PORT: 8091
  ARW_BIND: 0.0.0.0
  ARW_DEBUG: 0
  ARW_TRUST_FORWARD_HEADERS: 0
  # Network egress safety (recommended on in clustered deployments)
  ARW_EGRESS_BLOCK_IP_LITERALS: 1
  ARW_DNS_GUARD_ENABLE: 1
  # Access logs (structured)
  ARW_ACCESS_LOG: 0
  ARW_ACCESS_SAMPLE_N: 1
  ARW_ACCESS_UA: 0
  ARW_ACCESS_UA_HASH: 0
  ARW_ACCESS_REF: 0
  ARW_ACCESS_REF_STRIP_QS: 1
  # Rolling access log files
  ARW_ACCESS_LOG_ROLL: 0
  ARW_ACCESS_LOG_DIR: ""
  ARW_ACCESS_LOG_PREFIX: ""
  ARW_ACCESS_LOG_ROTATION: daily
  extra: [] # list of { name: FOO, value: BAR }

# Admin token wiring
adminToken:
  # Prefer referencing an existing Secret; the key holds the token string.
  existingSecret: ""
  # Secret key name (defaults to 'ARW_ADMIN_TOKEN' if empty)
  key: "ARW_ADMIN_TOKEN"
  # Not recommended: provide a literal value (overridden by existingSecret when set)
  value: ""

resources: {}

securityContext:
  enabled: true
  pod:
    runAsNonRoot: true
    runAsUser: 10001
    runAsGroup: 10001
    fsGroup: 10001
  container:
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: true
    capabilities:
      drop: ["ALL"]

state:
  enabled: false
  mountPath: /app/state
  size: 1Gi

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: arw.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

# Optional NetworkPolicy to restrict traffic
networkPolicy:
  enabled: false
  # When enabled, allow ingress to the service port from these CIDRs (empty means namespace-only)
  allowedCidrs: []

# Optional egress NetworkPolicy to restrict outbound traffic.
egressPolicy:
  enabled: false
  # Allow DNS resolution to the cluster DNS service (kube-dns/k8s-dns). Set your cluster CIDR.
  dnsCidrs:
    - 10.96.0.0/12
  # Additional allowed destination CIDRs (e.g., proxies). Empty denies all other egress.
  allowedCidrs: []

# Optional PodDisruptionBudget
pdb:
  enabled: false
  minAvailable: 0

# Optional HorizontalPodAutoscaler
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80
